<!DOCTYPE html>
<html>
    <head>
        <title>Markdo - mardown viewer for the desktop</title>
        <script src="bower_components/showdown/compressed/showdown.js"></script>
        <script src="bower_components/showdown/compressed/extensions/github.js"></script>
    </head>
    <body>
        <script>
            //var requirejs = require('requirejs');
            //requirejs.config({baseUrl: __dirname + 'bower_components/showdown/compressed', nodeRequire:require});

            var converter = new Showdown.converter();
            var files = require('nw.gui').App.argv;
            for (var i in files)
            {
                var file = files[i];
                var markdown = require('fs').readFile(file, 'utf8', function (err, data) {
                    
                    var h1 = window.document.createElement('h1');
                    h1.textContent = file;
                    window.document.body.appendChild(h1);
                    
                    var p = window.document.createElement('p');
                    if (err)
                    {
                        p.innerHTML = '<strong>ERROR! : ' + err + '</strong>';
                    }
                    else
                    {
                        p.innerHTML = converter.makeHtml(data);
                    }

                    window.document.body.appendChild(p);
                });
            }
        </script>
    </body>
</html>
